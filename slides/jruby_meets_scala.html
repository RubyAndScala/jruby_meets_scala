<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=1024">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>JRuby meets Scala | Not even a compiler can separate us | by Martin Mauch</title>
    
    <meta name="generator" content="Slide Show (S9)">
    <meta name="author" content="Martin Mauch">
    
    <!-- Custom CSS just for this page -->
    <link rel="stylesheet" href="jruby_meets_scala.css">
    
    <link rel="apple-touch-icon" href="apple-touch-icon.png" >
</head>

<body class="impress-not-supported">

<div id="impress">

    <!-- note: assumes no header (breaking slides w/ SLIDE directive) -->

    <div class='step slide omnipresent' data-x='0' data-y='0' data-scale='5' >
      <!-- === begin markdown block ===

      generated by markdown 1.1.1 on Ruby 2.0.0 (2013-11-22) [x86_64-darwin13.0.0]
                on 2014-01-10 00:55:04 +0100 with Markdown engine kramdown (1.1.0)
                  using options {}
  -->

<!-- _S9SLIDE_  slide omnipresent x=0 y=0 scale=5 -->

<div id="myinnercontainer" style="position:absolute; top:50%; right:50%; height:10em; margin-top:-6em; margin-right:-10.5em">
  <h2>JRuby <img src="img/ruby_logo.svg" width="60" height="60" />&nbsp;
  <span style="display:inline-block;vertical-align:middle">
  <img src="img/arrow_curved_blue.svg" width="210" height="105" /><br />
  <img src="img/arrow_curved_blue.svg" width="210" height="105" style="-webkit-transform:rotate(180deg);transform:rotate(180deg);" />
  </span>&nbsp;
  Scala <img src="img/scala_logo.svg" width="60" height="100" />
  </h2>
</div>


    </div>

    <div class='step slide' data-x='-1180' data-y='400' >
      <!-- _S9SLIDE_  slide x=-1180 y=400 -->

<h2 id="why-ruby">Why Ruby?</h2>

<ul>
  <li><a href="http://rubyonrails.org/">Rails</a></li>
  <li>Expressiveness</li>
  <li><a href="http://en.wikipedia.org/wiki/Ruby_(programming_language)#Philosophy">Ruby philosophy</a></li>
</ul>


    </div>

    <div class='step slide' data-x='1180' data-y='400' >
      <!-- _S9SLIDE_  slide x=1180 y=400 -->

<h2 id="why-scala">Why Scala?</h2>

<ul>
  <li><a href="http://www.reactivemanifesto.org/">Reactive</a> <a href="http://spray.io/">Web</a> <a href="http://www.playframework.com/">Frameworks</a></li>
  <li><a href="http://akka.io/">Akka Actor Framework</a></li>
  <li>Expressiveness</li>
  <li><a href="http://www.slideshare.net/dgalichet/demystifying-scala-type-system">Type Safety</a>, <a href="http://docs.scala-lang.org/tutorials/tour/local-type-inference.html">Type Inference</a>, <a href="http://scalamacros.org/">Macro tricks</a></li>
  <li><a href="http://benchmarksgame.alioth.debian.org/u64q/benchmark.php?test=all&amp;lang=jruby&amp;lang2=scala&amp;data=u64q#faster-programs-measurements">Performance</a> + Java InterOp</li>
</ul>

<p>Learn more at <a href="http://www.scala-tour.com/">scala-tour.com</a></p>


    </div>

    <div class='step slide' data-x='0' data-y='800' data-scale='0.7' >
      <!-- _S9SLIDE_  slide x=0 y=800 scale=0.7 -->

<h2 id="what-makes-learning-scala-easy">What makes learning Scala easy?</h2>

<ul>
  <li>Syntax</li>
  <li>Collection library</li>
  <li>DSL capabilities</li>
  <li>Code reuse via modules/traits</li>
</ul>


    </div>

    <div class='step slide' data-x='0' data-y='1350' data-scale='0.7' >
      <!-- _S9SLIDE_  slide x=0 y=1350 scale=0.7 -->

<h2 id="what-makes-learning-scala-hard">What makes learning Scala hard?</h2>

<ul>
  <li>Learning curve
    <ul>
      <li>Ruby: Just try it</li>
      <li>Scala: Obey the compiler</li>
    </ul>
  </li>
  <li>Programming paradigm
    <ul>
      <li>Ruby: 80% Object-Oriented, 20% Functional</li>
      <li>Scala: 50% Object-Oriented, 50% Functional</li>
    </ul>
  </li>
</ul>


    </div>

    <div class='step slide transparent' data-x='0' data-y='0' data-scale='5' data-z='-1' >
      <!-- _S9SLIDE_  slide transparent x=0 y=0 scale=5 z=-1 -->


    </div>

    <div class='step slide' data-x='0' data-y='-110' data-scale='0.4' >
      <!-- _S9SLIDE_  slide x=0 y=-110 scale=0.4 -->

<h2 id="tooling">Tooling</h2>

<ul>
  <li>The .classpath Treaty
    <ul>
      <li><code>sbt write-classpath</code> → <code>.classpath</code> → <code>scala_helper.rb</code></li>
    </ul>
  </li>
  <li>Continuous Testing
    <ul>
      <li><code>sbt ~compile</code> Scala code</li>
      <li><code>guard-rspec-jruby</code> picks up changes in <code>.rb</code> and <code>.class</code> files</li>
    </ul>
  </li>
  <li>Packaging
    <ul>
      <li><code>sbt dist</code> → <code>.jar</code></li>
      <li><code>.gemspec</code> includes <code>.jar</code></li>
    </ul>
  </li>
</ul>


    </div>

    <div class='step slide' data-x='0' data-y='-550' data-scale='0.4' >
      <!-- _S9SLIDE_  slide x=0 y=-550 scale=0.4 -->

<h2 id="jruby--scala-easier">JRuby → Scala (Easier)</h2>

<ul>
  <li>Just call Scala (most operators work)</li>
  <li>Use send for crazy Scala operators: <code>scala_list.send(:"+=", e)</code></li>
  <li>Collections: Either…
    <ul>
      <li>convert to and expect <code>java.util.(List|Map)</code> or</li>
      <li>use <a href="https://github.com/RubyAndScala/jruby-scala-collections">jruby-scala-collections</a> and <code>#to_scala</code> + <code>#from_scala</code></li>
    </ul>
  </li>
</ul>


    </div>

    <div class='step slide' data-x='0' data-y='330' data-scale='0.4' >
      <!-- _S9SLIDE_  slide x=0 y=330 scale=0.4 -->

<h2 id="scala--jruby-harder">Scala → JRuby (Harder)</h2>

<ul>
  <li>Use <a href="https://github.com/mcamou/scuby">Scuby</a>
    <ul>
      <li>Wraps JRuby objects</li>
      <li>Provides convenience methods and dynamic invocation facilities</li>
    </ul>
  </li>
  <li>Use <a href="https://github.com/RubyAndScala/jruby-scala-collections">jruby-scala-collections</a> for nested collections</li>
</ul>


    </div>

    <div class='step slide transparent' data-x='0' data-y='0' data-scale='5' data-z='-1' >
      <!-- _S9SLIDE_  slide transparent x=0 y=0 scale=5 z=-1 -->


    </div>

    <div class='step slide' data-x='0' data-y='10000' data-z='30' data-scale='10' >
      <!-- _S9SLIDE_  slide x=0 y=10000 z=30 scale=10 -->

<h2 id="slidesmaplearningssum"><code>slides.map(_.learnings).sum</code></h2>

<ul>
  <li>It’s not that hard when you know how to start</li>
  <li>It’s easier to make JRuby work with Scala</li>
  <li>Continuous Testing is helpful (as always)</li>
</ul>


    </div>

    <div class='step slide' data-x='0' data-y='20000' data-z='30' data-scale='10' >
      <!-- _S9SLIDE_  slide x=0 y=20000 z=30 scale=10 -->

<h2 id="future--rubyscala-"><code>future { ruby.scala() }</code></h2>

<ul>
  <li>(Mostly) green Rubyspecs for jruby-scala-collections</li>
  <li>Scuby wraps Scala functions as JRuby blocks</li>
  <li>Proxy class that tries to call Scala, falls back to JRuby</li>
</ul>


    </div>

    <div class='step slide' data-x='0' data-y='30000' data-z='30' data-scale='10' >
      <!-- _S9SLIDE_  slide x=0 y=30000 z=30 scale=10 -->

<h2 id="le-fin---">– Le fin –</h2>

<ul>
  <li>Questions?</li>
  <li>Scala rants?</li>
  <li><a href="#/step-14">Example Scuby code (Scala → JRuby)</a></li>
  <li><a href="#/step-15">In Scala, how do you…?</a></li>
</ul>

<p>Find this project under <a href="http://github.com/RubyAndScala/jruby_meets_scala">github.com/RubyAndScala/jruby_meets_scala</a></p>


    </div>

    <div class='step slide' data-x='-2800' data-y='30000' data-scale='0.4' data-z='-1000' >
      <!-- _S9SLIDE_  slide x=-2800 y=30000 scale=0.4 z=-1000 -->

<!-- begin code{:lang=>"scala", :engine=>"coderay"} -->
<div class="CodeRay">&lt;pre 'code'&gt;
<table class="CodeRay"><tr>
  <td class="line-numbers"><pre><a href="#n1" name="n1">1</a>
<a href="#n2" name="n2">2</a>
<a href="#n3" name="n3">3</a>
<a href="#n4" name="n4">4</a>
<a href="#n5" name="n5">5</a>
<a href="#n6" name="n6">6</a>
<a href="#n7" name="n7">7</a>
<a href="#n8" name="n8">8</a>
<a href="#n9" name="n9">9</a>
<strong><a href="#n10" name="n10">10</a></strong>
<a href="#n11" name="n11">11</a>
<a href="#n12" name="n12">12</a>
<a href="#n13" name="n13">13</a>
<a href="#n14" name="n14">14</a>
<a href="#n15" name="n15">15</a>
<a href="#n16" name="n16">16</a>
<a href="#n17" name="n17">17</a>
<a href="#n18" name="n18">18</a>
<a href="#n19" name="n19">19</a>
<strong><a href="#n20" name="n20">20</a></strong>
<a href="#n21" name="n21">21</a>
<a href="#n22" name="n22">22</a>
<a href="#n23" name="n23">23</a>
</pre></td>
  <td class="code"><pre>
require(&quot;test.rb&quot;)

// Sending methods via .send or Dynamic trait
eval(&quot;[1,2,3]&quot;).send[Long](`length) must beEqualTo(3)
eval(&quot;[1,2,3]&quot;).length must beEqualTo(3)

// Ruby reflection in Scala
eval[RubyObj](&quot;[]&quot;).isA_?(`Array) must beTrue
eval[RubyObj](&quot;[]&quot;).respondTo_?(`length) must beTrue

// obj(something) is forwared to obj[something]
eval(&quot;['foo','bar','baz']&quot;)(0) must beEqualTo(&quot;foo&quot;)
eval(&quot;{ :foo =&gt; 1, :bar =&gt; 2, :baz =&gt; 3 }&quot;)(`foo) must beEqualTo(1)

// Cast to trait/interface via .as[TraitName]
trait Person {
  def firstname: String
  def firstname_=(f: String): Unit
}
val zaphod:Person = new RubyObject(`Person, &quot;Zaphod&quot;).as[Person]
zaphod.firstname must beEqualTo(&quot;Zaphod&quot;)
zaphod.firstname = &quot;The Zeeb&quot;
</pre></td>
</tr></table>
</div>
<!-- end code -->


    </div>

    <div class='step slide' data-x='-2800' data-y='30800' data-scale='0.4' data-z='-1000' >
      <!-- _S9SLIDE_  slide x=-2800 y=30800 scale=0.4 z=-1000 -->

<h2 id="in-scala-how-do-you">In Scala, how do you…</h2>

<ul>
  <li>Add functionality to existing classes?
    <ul>
      <li>Implicits (Pimp-my-library pattern)</li>
    </ul>
  </li>
  <li>Create DSLs?
    <ul>
      <li>Implicits</li>
      <li>Macros</li>
    </ul>
  </li>
  <li>Achieve scalability
    <ul>
      <li>Parallel collections</li>
      <li>Actors</li>
    </ul>
  </li>
</ul>

<!-- === end markdown block === -->

    </div>


</div>

<script src="js/impress.js"></script>
<script>impress().init();</script>

</body>
</html>